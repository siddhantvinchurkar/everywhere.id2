var developer=!1,loadTimeError=!1,theme=!0,consoleStyle1=["background-color:#222222","color:#BADA55","display:inline","text-shadow:0 1px 0 rgba(0, 0, 0, 0.3)","text-align:center","font-size:1.1em","font-weight:bold"].join(";"),consoleStyle2=["background-color:#222222","color:#FF2222","display:inline","text-shadow:0 1px 0 rgba(0, 0, 0, 0.3)","text-align:center","font-size:1.1em","font-weight:bold"].join(";"),consoleStyle3=["background-color:#FF6611","color:#FFFFFF","display:inline","text-shadow:0 1px 0 rgba(0, 0, 0, 0.3)","text-align:center","font-size:1.1em","font-weight:bold"].join(";"),consoleStyle4=["background-color:#222222","color:#FFFF00","display:inline","text-shadow:0 1px 0 rgba(0, 0, 0, 0.3)","text-align:center","font-size:1.1em","font-weight:bold"].join(";"),consoleStyle5=["background-color:#222222","color:#9999FF","display:inline","text-shadow:0 1px 0 rgba(0, 0, 0, 0.3)","text-align:center","font-size:1.1em","font-weight:bold"].join(";"),consoleStyle6=["background-color:#222222","color:#00FF00","display:inline","text-shadow:0 1px 0 rgba(0, 0, 0, 0.3)","text-align:center","font-size:1.1em","font-weight:bold"].join(";"),githubUsername="unknown",githubUser="unknown",githubAccessToken="unknown",db="unknown";function applyStyles(e){switch(e){case"error":document.getElementById("loading-indicator").innerHTML='दाल में कुछ काला है । Maybe hit <span style="box-sizing: border-box;border:5px solid #FFFFFF;padding:5px;">F5</span> ?',$("#loading-indicator").fadeIn(),$("#clouds").fadeIn(),$("#skeleton").fadeOut();break;default:document.getElementById("loading-indicator").innerHTML='Hello from Data Fire!<br /><span style="font-size:0.5em;text-shadow: 0px 1px 2px #FF0000;">Sign in with your </span><img id="sign-in-button" height="100px" src="images/logos/github_logo_white.png" style="cursor:pointer;" alt="Unable to load image!"></img><span style="font-size:0.5em;text-shadow: 0px 1px 2px #FF0000;"> account.</span>',$("#loading-indicator").fadeIn()}}function changeAppState(e,o){switch(e){case"ready":applyStyles(),onAppStateChanged(e,o);break;case"error":applyStyles("error"),onAppStateChanged(e,o)}}function injectHTML(e,o){document.getElementById(o).innerHTML="",document.getElementById(o).innerHTML=e}function load(e,o,n,t){developer&&console.log("\n%c "+o+" %c "+e+"\n",consoleStyle4,consoleStyle3);var a=new XMLHttpRequest;a.responseType=null==n?"json":"text",a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&onLoad(e,n,a.response,t)},a.open(o,e);try{a.send()}catch(o){console.log(o),changeAppState("error",o),onLoad(e,n,null,t)}}function changeColor(e,o){var n=!1;"#"==e[0]&&(e=e.slice(1),n=!0);var t=parseInt(e,16),a=(t>>16)+o;a>255?a=255:a<0&&(a=0);var i=(t>>8&255)+o;i>255?i=255:i<0&&(i=0);var l=(255&t)+o;return l>255?l=255:l<0&&(l=0),(n?"#":"")+(l|i<<8|a<<16).toString(16)}function lightenAppBackground(){if(theme){theme=!1;var e="#FF6611",o=0,n=setInterval(function(){o<28?(o++,document.getElementById("body").style="background-color:"+changeColor(e,o/2)+";",e=changeColor(e,o/2),developer&&console.log("\n%c ACTION %c Background color changed to "+e+"\n",consoleStyle5,["background-color:"+e,"color:#000000","display:inline","text-shadow:0 1px 0 rgba(0, 0, 0, 0.3)","text-align:center","font-size:1.1em","font-weight:bold"].join(";"))):(clearInterval(n),e="#F6F6F6",document.getElementById("body").style="background-color:#F6F6F6;",developer&&console.log("\n%c ACTION %c Background color changed to "+e+"\n",consoleStyle5,["background-color:"+e,"color:#000000","display:inline","text-shadow:0 1px 0 rgba(0, 0, 0, 0.3)","text-align:center","font-size:1.1em","font-weight:bold"].join(";")))},100)}else darkenAppBackground()}function darkenAppBackground(){if(theme)lightenAppBackground();else{theme=!0;var e="#FFAA66",o=0;document.getElementById("body").style="background-color:#FFAA66;",developer&&console.log("\n%c ACTION %c Background color changed to "+e+"\n",consoleStyle5,["background-color:"+e,"color:#FFFFFF","display:inline","text-shadow:0 1px 0 rgba(0, 0, 0, 0.3)","text-align:center","font-size:1.1em","font-weight:bold"].join(";"));var n=setInterval(function(){o<16?(o++,document.getElementById("body").style="background-color:"+changeColor(e,o/3*-1)+";",e=changeColor(e,o/3*-1),developer&&console.log("\n%c ACTION %c Background color changed to "+e+"\n",consoleStyle5,["background-color:"+e,"color:#FFFFFF","display:inline","text-shadow:0 1px 0 rgba(0, 0, 0, 0.3)","text-align:center","font-size:1.1em","font-weight:bold"].join(";"))):(clearInterval(n),document.getElementById("body").style="background-color:#FF6611;",e="#FF6611",developer&&console.log("\n%c ACTION %c Background color changed to "+e+"\n",consoleStyle5,["background-color:"+e,"color:#FFFFFF","display:inline","text-shadow:0 1px 0 rgba(0, 0, 0, 0.3)","text-align:center","font-size:1.1em","font-weight:bold"].join(";")))},100)}}function setFadeInitialState(){$("#loading-indicator").fadeIn(),$("#loading-indicator").fadeOut(),$("#continue-button").fadeOut(),$("#skeleton").fadeOut()}function onLoad(e,o,n,t){switch(null!==o&&injectHTML(n,o),null!==n?console.log("\n%c OK %c Fetch complete.\n",consoleStyle1,consoleStyle3):developer&&console.log("\n%c ERROR %c Failed to fetch resource at "+e+"\n",consoleStyle2,consoleStyle3),t){case 0:document.getElementById("loading-indicator").innerHTML='<span><img id="github-logo" height="100px" src="images/logos/github_logo_white.png" alt="Unable to load image!"></img><span style="font-size:0.5em;">/&emsp;<img id="github-avatar" height="100px" src="'+githubUser.photoURL+'" style="cursor:pointer; border-radius: 50%;" alt="Unable to load image!"></img>&emsp;<a href="https://github.com/'+githubUsername+'" target="_blank" style="color:#FFFFFF;text-shadow: 0px 1px 2px #FF0000;">'+githubUsername+'</a></span><br /><span style="font-size:0.4em; text-shadow: 0px 1px 2px #FF0000; line-height:40%; margin-left:20px;">'+n.bio+"</span>",$("#loading-indicator").fadeIn(),$("#continue-button").fadeIn();break;case 1:setTimeout(function(){$("#loading-indicator").fadeOut(),$("#skeleton").fadeIn()},1e3),lightenAppBackground()}}function onAppLoad(){changeAppState("ready","Data Fire is loaded and ready to go!"),load("components/index.clouds.html","GET","clouds"),firebase.initializeApp({apiKey:"AIzaSyCFtQlkJVHQj2HxLx8Ce_YoNDSjuuQ6EEM",authDomain:"xdata-fire.firebaseapp.com",databaseURL:"https://xdata-fire.firebaseio.com",projectId:"xdata-fire",storageBucket:"xdata-fire.appspot.com",messagingSenderId:"458048346214"}),db=firebase.firestore(),document.getElementById("sign-in-button").onclick=function(){$("#loading-indicator").fadeOut();var e=new firebase.auth.GithubAuthProvider;firebase.auth().signInWithPopup(e).then(function(e){onUserSignedIn(e.additionalUserInfo.username,e.user,e.credential.accessToken)}).catch(function(e){console.log(e)})},firebase.auth().getRedirectResult().then(function(e){e.credential&&onUserSignedIn(e.user)}).catch(function(e){console.log(e)}),firebase.auth().signOut().then(function(){onUserSignedOut()}).catch(function(e){console.log(e)}),document.getElementById("continue-button").onclick=function(){$("#loading-indicator").fadeOut(),setTimeout(function(){document.getElementById("loading-indicator").innerHTML="Getting things ready...",$("#loading-indicator").fadeIn()},1e3),$("#continue-button").fadeOut(),$("#clouds").fadeOut(),$("#continue-button").fadeOut(),load("components/index.skeleton.html","GET","skeleton",1)}}function onAppStateChanged(e,o){switch(e){case"ready":console.log("\n%c OK %c "+o+"\n",consoleStyle1,consoleStyle3);break;case"error":console.log("\n%c ERROR %c "+o+"\n",consoleStyle2,consoleStyle3)}}function onUserSignedIn(e,o,n){githubUsername=e,githubUser=o,githubAccessToken=n,console.log("\n%c OK %c Signed in as "+githubUser.displayName+"!\n",consoleStyle1,consoleStyle3),load("https://api.github.com/users/"+githubUsername,"GET",null,0),db.collection("users").where("email","==",githubUser.email).get().then(function(e){e.forEach(function(e){e.id||db.collection("users").add({displayName:githubUser.displayName,email:githubUser.email,username:githubUsername,photoURL:githubUser.photoURL}).then(function(){console.log("\n%c FIRESTORE %c  ADD\n",consoleStyle6,consoleStyle3)})})})}function onUserSignedOut(){}window.onload=function(){setFadeInitialState(),setTimeout(function(){loadTimeError||("serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js").then(function(){console.log("\n%c OK %c Service worker registered.\n",consoleStyle1,consoleStyle3)}),onAppLoad())},2e3)},window.onerror=function(e,o,n,t,a){console.clear(),developer?console.log("\nURL: "+o+"\nLine And Column Number: "+n+":"+t+"\nError: "+a+"\nMessage: "+e):window.location.reload(),changeAppState("error","दाल में कुछ काला है । Maybe hit F5?")};
